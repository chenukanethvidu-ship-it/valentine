<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>For Sanu ğŸ’–</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      color: #fff;
      overflow: hidden;
    }

    .card {
      background: rgba(255,255,255,0.25);
      padding: 40px;
      border-radius: 22px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      max-width: 450px;
      z-index: 10; /* MAKE SURE CARD IS ABOVE EVERYTHING */
      font-size: 22px;
      font-weight: bold;
      line-height: 1.5;
      position: relative;
    }

    button {
      margin-top: 20px;
      padding: 15px 30px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      background: #ff4d6d;
      color: white;
      transition: all 0.3s ease;
      z-index: 11; /* make sure buttons are above hearts */
      position: relative;
    }

    .no-btn {
      background: #ffffffaa;
      color: #ff4d6d;
      font-size: 18px;
      font-weight: bold;
      position: relative;
      z-index: 11;
    }

    .hidden {
      display: none;
    }

    /* Floating hearts */
    .heart {
      position: absolute;
      bottom: -20px;
      font-size: 20px;
      animation: floatUp 6s linear infinite;
      opacity: 0.7;
      pointer-events: none; /* THIS FIXES BUTTONS NOT CLICKABLE */
    }

    @keyframes floatUp {
      from { transform: translateY(0); opacity:1;}
      to { transform: translateY(-120vh); opacity:0;}
    }

    /* Drag & drop game styles */
    .game-board {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    .color-box, .flower-box {
      width: 80px;
      height: 80px;
      border-radius: 12px;
      border: 2px solid #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.2s;
    }

    .color-box:hover, .flower-box:hover {
      transform: scale(1.1);
    }

    .flower-box {
      background: rgba(255,255,255,0.2);
    }

    .game-caption {
      font-size: 20px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <!-- Music -->
  <audio id="music" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2b8b9f3b3b.mp3" type="audio/mpeg">
  </audio>

  <!-- STEP 1 -->
  <div class="card" id="step1">
    <h2>Hey Sanuuu ğŸ’•</h2>
    <p>So I made this to askk you somethingâ€¦ ğŸ’Œ</p>
    <button onclick="next()">Okay ğŸ‘€</button>
  </div>

  <!-- STEP 2: Just message -->
  <div class="card hidden" id="step2">
    <p>Lowkey missed texting you and thatâ€™s why I am here making this website</p>
    <button onclick="nextGame()">Next â¬‡ï¸</button>
  </div>

  <!-- STEP 3: Mini-game -->
  <div class="card hidden" id="step3">
    <p class="game-caption">I donâ€™t wanna make it boring for you, so letâ€™s play this game! ğŸŒˆ</p>
    <div class="game-board" id="gameBoard"></div>
    <button id="gameNext" class="hidden" onclick="showQuestion()">Done!</button>
  </div>

  <!-- STEP 4: Valentine Question -->
  <div class="card hidden" id="step4">
    <h2>Since no one ever asked you thisâ€¦</h2>
    <p>Can I be your Valentine, gammata? ğŸ˜</p>
    <button id="yesBtn" onclick="yesClicked()">YES ğŸ’–</button><br>
    <button class="no-btn" onclick="noClicked()">NO ğŸ˜’</button>
  </div>

  <!-- STEP 5: Final YAY -->
  <div class="card hidden" id="step5">
    <h2>YAYYY ğŸ‰ğŸ’—</h2>
    <p>
      I donâ€™t need a special day to love you, but Iâ€™ll use this one to do it louder ğŸ’–  
      <br><br>
      PS: As always, I promise to take care of you and I hope we can be together in the future ğŸ¾
    </p>
  </div>

  <script>
    const music = document.getElementById("music");
    let yesBtn = document.getElementById("yesBtn");
    let yesSize = 1;

    function next() {
      step1.classList.add("hidden");
      step2.classList.remove("hidden");
      music.play();
    }

    function nextGame() {
      step2.classList.add("hidden");
      step3.classList.remove("hidden");
      setupGame();
    }

    // YES button grows when NO clicked
    function noClicked() {
      yesSize += 0.3;
      yesBtn.style.transform = `scale(${yesSize})`;
    }

    function yesClicked() {
      step4.classList.add("hidden");
      step5.classList.remove("hidden");
    }

    function showQuestion() {
      step3.classList.add("hidden");
      step4.classList.remove("hidden");
    }

    // Drag & Drop Game Setup
    const colors = [
      {color:"#ff4d6d", flower:"ğŸ’"},
      {color:"#fdd835", flower:"ğŸŒ»"},
      {color:"#4db6ac", flower:"ğŸŒ·"},
      {color:"#ba68c8", flower:"ğŸŒ¸"}
    ];

    function setupGame() {
      const board = document.getElementById("gameBoard");
      board.innerHTML = "";
      document.getElementById("gameNext").classList.add("hidden");

      colors.forEach((item, i) => {
        const colorBox = document.createElement("div");
        colorBox.className = "color-box";
        colorBox.style.background = item.color;
        colorBox.draggable = true;
        colorBox.id = "color"+i;

        colorBox.addEventListener("dragstart", (e)=>{
          e.dataTransfer.setData("text", colorBox.id);
        });

        board.appendChild(colorBox);
      });

      colors.forEach((item, i) => {
        const flowerBox = document.createElement("div");
        flowerBox.className = "flower-box";
        flowerBox.innerText = item.flower;
        flowerBox.id = "flower"+i;

        flowerBox.addEventListener("dragover", (e)=>{
          e.preventDefault();
        });

        flowerBox.addEventListener("drop", (e)=>{
          e.preventDefault();
          const colorId = e.dataTransfer.getData("text");
          const colorIndex = parseInt(colorId.replace("color",""));
          if(colorIndex === i){
            flowerBox.style.background = colors[i].color;
            flowerBox.style.color = "#fff";
            flowerBox.style.fontSize = "36px";
            document.getElementById(colorId).style.display="none";
            checkGameCompletion();
          } else {
            alert("Oops, try again! ğŸ˜…");
          }
        });

        board.appendChild(flowerBox);
      });
    }

    function checkGameCompletion(){
      const hiddenColors = Array.from(document.querySelectorAll(".color-box")).filter(c => c.style.display==="none");
      if(hiddenColors.length === colors.length){
        animateHearts();
      }
    }

    function animateHearts(){
      const board = document.getElementById("gameBoard");
      for(let i=0; i<30; i++){
        const heart = document.createElement("div");
        heart.innerText = i%2===0 ? "ğŸ’—" : "ğŸ‰";
        heart.style.position = "absolute";
        heart.style.left = (board.offsetLeft + Math.random()*board.offsetWidth) + "px";
        heart.style.top = (board.offsetTop + Math.random()*board.offsetHeight) + "px";
        heart.style.fontSize = (15 + Math.random()*25) + "px";
        heart.style.pointerEvents = "none"; // FIX clickable issue
        document.body.appendChild(heart);

        let top = board.offsetTop + Math.random()*50;
        const interval = setInterval(()=>{
          top -= 3 + Math.random()*3;
          heart.style.top = top + "px";
          if(top < -50){ 
            heart.remove(); 
            clearInterval(interval); 
          }
        },30);
      }
      setTimeout(()=>{ document.getElementById("gameNext").classList.remove("hidden"); }, 1000);
    }

    // Floating hearts
    setInterval(() => {
      const heart = document.createElement("div");
      heart.classList.add("heart");
      heart.innerText = "ğŸ’—";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.fontSize = Math.random() * 20 + 15 + "px";
      document.body.appendChild(heart);
      setTimeout(() => { heart.remove(); }, 6000);
    }, 500);
  </script>

</body>
</html>
